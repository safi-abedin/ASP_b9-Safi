@model QuestionCreateModel
@{
    ViewData["Title"] = "Create";
}

@section Styles{
    <!-- Include the bundled styles -->
    <link rel="stylesheet" src="~/stackoverflow/stacks-editor/dist/styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@stackoverflow/stacks-editor/dist/styles.css" />
    <link rel="stylesheet" href="https://unpkg.com/@@stackoverflow/stacks/dist/css/stacks.min.css">
    <!-- Select2 -->
    <link rel="stylesheet" href="~/AdminLTE/plugins/select2/css/select2.min.css">
    <link rel="stylesheet" href="~/AdminLTE/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">

}




<div class="col-md-12">
    <h1>Create Question</h1>
    <form id="questionForm" asp-action="Create" asp-area="User" asp-antiforgery="true" method="post">
        <!-- Your form inputs -->


        <div class="d-flex gy4 fd-column">
            <label class="s-label" asp-for="Title">Title</label>
            <p class="s-description mtn2 mb0">Be specific and imagine you’re asking a question to another person.</p>
            <input class="s-input" asp-for="Title" id="example-item1" type="text" placeholder="e.g. How to return the wrong fruit if it is the first item in the array?" />
        </div>

        <div>
            <label>Details:</label><br>
            <div id="detailsEditor"></div>
            <input type="hidden" asp-for="Details" id="detailsInput">
            <span asp-validation-for="Details" class="text-danger"></span>
        </div>

        <div>
            <label>Tried Approach:</label><br>

            <div id="editor-example-2"></div>
            <textarea id="editor-content-2" asp-for="TriedApproach" class="d-none"></textarea>

            <span asp-validation-for="TriedApproach" class="text-danger"></span>
        </div>


        <br />

        <div class="form-group">
            <label class="s-label" for="tag-selector">Tags</label>
            <div class="select2-primary">
                <select id="tags" class="select2" asp-for="Tags" asp-items="Model.MultiTags" multiple="multiple" data-placeholder="Select tags" data-dropdown-css-class="select2-primary" style="width: 100%;">

                </select>
            </div>
        </div>




        <!-- Your form inputs -->

        <button class="s-btn s-btn__filled" type="submit">Post Your Question</button>
    </form>
</div>






<!-- Ensure the Scripts section -->
@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/@@stackoverflow/stacks-editor/dist/app.bundle.js"></script>
    <script src="~/AdminLTE/plugins/select2/js/select2.full.min.js"></script>

    <script>

        var data = [];


        //Initialize Select2 Elements
        $('.select2').select2({
            data: data
        })

        $('#tags').select2();


        document.addEventListener("DOMContentLoaded", function () {
            // Initialize Stacks Editors
            var detailsEditor = new window.stacksEditor.StacksEditor(
                document.querySelector("#detailsEditor"), "", {});

            var approachEditor = new window.stacksEditor.StacksEditor(
                document.querySelector("#approachEditor"), "", {});

            // Update hidden inputs with Markdown content
            document.getElementById("questionForm").addEventListener("submit", function () {
                document.getElementById("detailsInput").value = detailsEditor.getValue();
                document.getElementById("approachInput").value = approachEditor.getValue();
            });
        });
    </script>

    <script>
        new window.stacksEditor.StacksEditor(
            document.querySelector("#editor-example-2"),
            document.querySelector("#editor-content-2").value,
            {
                parserFeatures: {
                    tables: true,
                },
            }
        );
        document.querySelector("#questionForm").addEventListener("submit", function (event) {


            // Get the element containing the user input
            var userInputDiv = document.querySelector('.s-prose');

            // Get the inner HTML of the user input element
            var userInputHTML = userInputDiv.innerHTML;

            // Set the content to the hidden textarea
            document.querySelector("#editor-content-2").value = userInputHTML;


            // Get selected tags
            var selectedTags = $('#tags').val();

            console.log(selectedTags);

            // Set selected tags to the hidden input
            document.getElementById("Tags").value = selectedTags;

        });

    </script>
}





